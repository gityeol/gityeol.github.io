<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>호텔 비교 블로그 | Agoda 어필리에이트</title>
<meta name="description" content="지역별 인기 호텔 비교, 장단점 분석, Agoda 예약 링크 제공">
<link rel="stylesheet" href="style.css">
</head>
<body>
<header>
<h1><a href="/">호텔 비교 블로그</a></h1>
<nav>
<a href="/">홈</a>
<a href="/about.html">소개</a>
<a href="/contact.html">문의</a>
<a href="/privacy.html">개인정보처리방침</a>
<a href="/terms.html">이용약관</a>
</nav>
</header>

<main>
<div class="filters">
  <label>도시
    <select id="filter-city">
      <option value="">전체</option>
    </select>
  </label>
  <label>최소 평점
    <input type="number" id="filter-minrating" min="0" max="5" step="0.5" placeholder="0">
  </label>
  <label>최대 가격(숫자)
    <input type="number" id="filter-maxprice" min="0" step="1" placeholder="0">
  </label>
  <button id="filter-reset">초기화</button>
  <a href="pages/sort-rating.html">평점순</a>
  <a href="pages/sort-price.html">가격순</a>
  <a href="sitemap.xml">사이트맵</a>
  <a href="cities/부산.html">부산</a>
</div>
<h2>최신 호텔 비교 글</h2>
<div id="post-grid" class="grid">
  <!-- 자동 생성 카드가 들어갑니다 -->
  <noscript>
    <ul id="post-list">
      <li><a href="posts/호텔A.html">호텔A 비교</a></li><li><a href="posts/호텔B.html">호텔B 비교</a></li>
    </ul>
  </noscript>
  <ul id="post-list" style="display:none"></ul>
  <!-- JS 없이도 서버가 <ul id="post-list">를 갱신하므로, 빌드 시 카드를 서버에서 채웁니다. -->
</div>
<script>
// Enhance cards with data attributes (populated server-side later)
function parsePrice(text){
  const m = (text||'').replace(/,/g,'').match(/(\d+(?:\.\d+)?)/);
  return m? parseFloat(m[1]) : 0;
}
function parseRating(text){
  const m = (text||'').match(/(\d+(?:\.\d+)?)/);
  return m? parseFloat(m[1]) : 0;
}
function applyFilters(){
  const city = document.getElementById('filter-city').value;
  const minR = parseFloat(document.getElementById('filter-minrating').value||'0');
  const maxP = parseFloat(document.getElementById('filter-maxprice').value||'0');
  const cards = document.querySelectorAll('#post-grid .card');
  cards.forEach(card=>{
    const c = card.getAttribute('data-city')||'';
    const r = parseFloat(card.getAttribute('data-rating')||'0');
    const p = parseFloat(card.getAttribute('data-price')||'0');
    let ok = true;
    if (city && c!==city) ok=false;
    if (!isNaN(minR) && minR>0 && r<minR) ok=false;
    if (!isNaN(maxP) && maxP>0 && p>maxP) ok=false;
    card.style.display = ok? '' : 'none';
  });
}
function initFilters(){
  const grid = document.getElementById('post-grid');
  const cards = Array.from(grid.querySelectorAll('.card'));
  // Build city options
  const citySel = document.getElementById('filter-city');
  const cities = Array.from(new Set(cards.map(c=>c.getAttribute('data-city')).filter(Boolean))).sort();
  cities.forEach(c=>{ const o=document.createElement('option'); o.value=c; o.textContent=c; citySel.appendChild(o); });
  // Bind events
  document.getElementById('filter-minrating').addEventListener('input', applyFilters);
  document.getElementById('filter-maxprice').addEventListener('input', applyFilters);
  citySel.addEventListener('change', applyFilters);
  document.getElementById('filter-reset').addEventListener('click', ()=>{
    citySel.value='';
    document.getElementById('filter-minrating').value='';
    document.getElementById('filter-maxprice').value='';
    applyFilters();
  });
}
document.addEventListener('DOMContentLoaded', initFilters);
</script>
</main>

<footer>
<p>© 2025 호텔 비교 블로그 | Agoda Affiliate</p>
</footer>
</body>
</html>